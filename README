TODO: implement FirstUIP-based conflict resolution